# plugin location: `~/.local/share/zinit/plugins`

# oh-my-zsh plugins
# gitfast workaround: https://github.com/zdharma/zinit/issues/477
# gitfast is based on https://github.com/felipec/git-completion
# in some environments, we may not be able to install svn
if type svn &> /dev/null; then
  zinit svn wait lucid for \
    OMZ::plugins/gitfast atpull'zinit creinstall -q .' \
    OMZ::plugins/extract
fi

# NOTE the public iterm zsh integration is broken
# https://github.com/decayofmind/zsh-iterm2-utilities
zinit ice depth"1" \
  pick"shell_integration/zsh" \
  sbin"utilities/*" if"[[ $+ITERM_PROFILE ]]"
zinit load gnachman/iTerm2-shell-integration

# autopair must be loaded before syntax highlight
zinit wait lucid for \
  OMZ::lib/functions.zsh \
  OMZ::lib/termsupport.zsh \
  hlissner/zsh-autopair \
  OMZ::plugins/safe-paste

# keeping
# zicompinit runs `compinit` to generate completions
# important to load suggestions *after* zsh-completions
#   - fzf/key-bindings: sets up reverse-i via fzf
#   - fzf-tab: load order is important, must go last
# TODO should probably remove gitfast above with git-completion in place
zinit wait lucid for \
  mafredri/zsh-async \
  felipec/git-completion \
  redxtech/zsh-asdf-direnv \
  zpm-zsh/zsh-better-npm-completion \
  'https://github.com/junegunn/fzf/blob/master/shell/completion.zsh' \
  'https://github.com/junegunn/fzf/blob/master/shell/key-bindings.zsh' \
  as'completion' blockf OMZ::plugins/ripgrep/_ripgrep \
  blockf atpull'zinit creinstall -q .' zsh-users/zsh-completions \
  atinit"zicompinit; zicdreplay" zdharma/fast-syntax-highlighting \
  atload'_zsh_autosuggest_start' zsh-users/zsh-autosuggestions \
  Aloxaf/fzf-tab \
  sudosubin/zsh-github-cli

# must be loaded after syntax completion
# there's a bug in the standard distribution: https://github.com/zsh-users/zsh-history-substring-search/pull/135
# although, after more investigation this wasn't causing the wordchar issue I was running into so we don't need
# to use this fork
zinit ice ver"redrawhook"
zinit light jirutka/zsh-history-substring-search

# experimental
#   - zsh-256color: configures env for 256 color support
#   - colors: sets aliases for some colors and most styles via '$c'
#   - lib/spectrum.zsh: 'spectrum_ls' alias to visually inspect colors
zinit wait'1' lucid for \
  marzocchi/zsh-notify \
  MichaelAquilina/zsh-autoswitch-virtualenv \
  ajeetdsouza/zoxide \
  djui/alias-tips \
  chrissicool/zsh-256color \
  zpm-zsh/colors \
  OMZ::lib/spectrum.zsh \
  wfxr/forgit \
  RobSis/zsh-completion-generator \
  seletskiy/zsh-fuzzy-search-and-edit

# binaries installed via zinit
#   - git-fuzzy: 'git fuzzy' for interactive git commit cli
#   - ports: 'ports ls' to inspect what ports are open
#   - universalarchive: 'ua' for easily unarchiving everything from the command line`
zinit wait'2' lucid for \
  as"program" pick"bin/git-fuzzy" bigH/git-fuzzy \
  caarlos0/ports \
  OMZ::plugins/universalarchive

# must load last
zinit ice compile'(pure|async).zsh' pick'async.zsh' src'pure.zsh'
zinit light sindresorhus/pure
